---
import { buildWhatsAppLink } from "@lib/whatsapp";
const { currentPath, brand, whatsapp } = Astro.props;

const nav = [
  { href: "/", label: "Inicio" },
  { href: "/servicios", label: "Servicios" },
  { href: "/galeria", label: "Trabajos" },
  { href: "/ubicacion", label: "Ubicación" },
  { href: "/turnos", label: "Turnos" }
];

const cta = buildWhatsAppLink(
  whatsapp,
  `Hola, quiero reservar un turno en ${brand}. ¿Qué disponibilidad tienen hoy?`
);

const isActive = (href: string) => (href === "/" ? currentPath === "/" : currentPath.startsWith(href));
---
<header class="fixed top-0 inset-x-0 z-50">
  <div class="bg-ink-950/75 backdrop-blur border-b border-white/5">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="/" class="group flex items-center gap-2">
        <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-white/5 border border-white/10 shadow-soft">
          <span class="h-2 w-2 rounded-full bg-cyanA-500/80"></span>
        </span>
        <span class="font-semibold tracking-tight text-zinc-50">{brand}</span>
        <span class="hidden sm:inline text-xs text-zinc-400 group-hover:text-zinc-300">Barber moderno, sin vueltas</span>
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        {nav.map((item) => (
          <a
            href={item.href}
            class:list={[
              "text-zinc-300 hover:text-zinc-50 transition",
              isActive(item.href) ? "text-zinc-50" : ""
            ]}
          >
            {item.label}
          </a>
        ))}
      </nav>

      <div class="flex items-center gap-2">
        <a
          href="/turnos"
          class="hidden sm:inline-flex rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-zinc-100 hover:bg-white/10 transition"
        >
          Ver turnos
        </a>
        <a
          href={cta}
          target="_blank"
          rel="noreferrer"
          class="inline-flex items-center justify-center rounded-xl bg-cyanA-500/15 border border-cyanA-500/25 px-3 py-2 text-sm font-semibold text-cyanA-500 hover:bg-cyanA-500/20 transition shadow-glow"
        >
          Reservar
        </a>
      </div>
    </div>
  </div>
</header>
